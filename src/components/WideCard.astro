---
const { item } = Astro.props;

const placeholderImage = 'https://via.placeholder.com/150'
---

<div class="product-card" role="listitem">
    <a href="/signal-sources" class="product product-wide">
        <div class="sl-animation">
            <img src={ item.image || placeholderImage } class="product-image" style="background-color: transparent;"/>
        </div>

        <div class="info-container">
            <div class="title text-two-line-overflow">{ item.name }</div>
            <div class="subtitle">
                <div class="rating-element">
                    <div class="label">3.5</div>
                    <div class="label"></div>
                </div>
                <div class="sl-divider"></div>
                <div class="categories">
                    <div class="text-ellipsis">CategoryName</div>
                    <div class="additional-categories"></div>
                </div>
            </div>
        </div>
        
        <div class="price-container">
            <div class="price-badge">
                <div class="price-container">
                    Free
                </div>
            </div>
        </div>
    </a>
</div>

<style>
    :host {
        --dark-theme-background-color: hsl(240 5.1% 15%);
        --card-width: calc(100% - 0.75rem * (4 - 1) / 4);
        --card-height: 75px;
        --border-radius-large: 0.5rem;
        --spacing-small: 0.75rem;
        --transition-fast: 150ms;
        --font-size-medium: 1rem;
        --font-size-small: 0.875rem;
        --title-font-weight: 600;
        --color-neutral-800: hsl(240 7.3% 84%);
        --theme-subtitle-color: #D1D1D1;
        --font-size-x-small: 0.75rem;
    }

    .product-card {
        width: var(--card-width);
        flex-shrink: 0;
        z-index: 1;
    }

    .product-card, 
    .product-card-skeleton {
        scroll-snap-align: start;
        scroll-snap-stop: normal;
    }

    @media (prefers-color-scheme: dark) {
        .product {
            --common-background-color: var(--dark-theme-background-color);
        }
    }

    .product {
        display: flex;
    }

    .product-wide {
    }

    .product img {
        height: var(--card-height);
        width: auto;
        border-radius: var(--border-radius-large);
        vertical-align: middle;
        margin-right: var(--spacing-small);
        transition: all var(--transition-fast) ease-out;
    }

    .info-container {
        display: flex;
        flex-direction: column;
        flex: 1 1 0%;
        overflow: hidden;
        gap: 4px;
    }

    .price-container {
        display: flex;
    }

    .text-two-line-overflow {
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        overflow: hidden;
        -webkit-box-orient: vertical;
        white-space: normal !important;
    }

    .product .title {
        font-weight: var(--title-font-weight);
        font-size: var(--font-size-small);
        color: var(--color-neutral-800);
        white-space: nowrap;
        overflow-x: hidden;
        text-overflow: ellipsis;
        margin: 0px;        
    }

    .product-wide .title {
        font-size: var(--font-size-medium);
    }

    .product 
    .subtitle, 
    .additional-categories {
        font-size: var(--font-size-x-small);
        color: var(--theme-subtitle-color);
        display: flex;
    }    

    .categories {
        display: inline-flex;
        align-items: center;
        min-width: 32px;
    }

    .text-ellipsis {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .additional-categories {
        margin-left: 4px;
        flex-shrink: 0;
    }
</style>